import { HttpClient } from './../shared/http.client';
/**
 * Created by smartha on 6/14/17.
 */
import { Component, Injectable } from '@angular/core';
import { Response } from '@angular/http';

import { Router, ActivatedRoute } from '@angular/router';
import 'rxjs/Rx';

@Injectable()
export class SAPenTestService {
    public params: any;
    constructor(private _routeParams: ActivatedRoute, private _http: HttpClient) {
        this._routeParams.params.subscribe(params => {
            this.params = params;
        });
    }
    getWorkStatus(id, feature?: string) {
        feature = null;
        return this._http.get(
            `/sa-services/${id}/pentest/${feature ? feature : ''}`)
        .map(response => response.text().length > 0 ? response.json() : null);
    }
    getQuestionaire(id, feature) {
        return this._http.get(
            `/sa-services/${id}/pentest/${feature}/questionnaire`);
    }
    submitQuestionaire(id, feature, actionId, body?: any, options?: any) {
        return this._http.post(`/sa-services/${id}/pentest/${feature}/questionnaire?actionId=${actionId}`, body)
        .map(res => res.text().length > 0 ? res.json() : null, error => <any>error);
    }
    submitQID(id, body?: any) {
      return this._http.post(`/sa-services/${id}/pentest/qId/12`, body)
        .map(res => res.text().length > 0 ? res.json() : null, error => <any>error);
    }
}
