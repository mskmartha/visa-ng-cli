<app-work-flow-stepper #stepperDemo="stepper" [options]="options" (emitCurrentStepEvent)="loadStep($event)">
    <app-work-flow [label]="'1. Pre-Scoping Questionnaire'" [isOpen]="true">
      <app-work-flow-body>
        <div *ngIf="prescopeStepper; then prescopeThenBlock; else prescopeElseBlock"> </div>
      </app-work-flow-body>
      <app-work-flow-actions *ngIf="prescopeThenBlock === successBlock">
        <mat-card-actions align="end" class="col-lg-12">
          <button mat-raised-button type="button" color="secondary" class="cta-2" *ngIf="!preScopeComplete || (prescopeThenBlock === successBlock)" (click)="reloadPenTest();">View</button>
          <button mat-raised-button type="button" color="primary" class="cta-1" [disabled]="!preScopeComplete" (click)="selectWrkFlw()">Next</button>
        </mat-card-actions>
      </app-work-flow-actions>
      <app-work-flow-actions *ngIf="preScopeComplete && prescopeThenBlock === prescopeBlock">
        <mat-action-row>
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="selectWrkFlw()">Next</button>
        </mat-action-row>
      </app-work-flow-actions>
    </app-work-flow>

    <app-work-flow [label]="'2. QID'" [isOpen]="isOpen">
      <app-work-flow-body>
        <br>
        <app-editable-table *ngIf="loadQID && serverInfoConfig" [tableConfig]="serverInfoConfig" (tableEntriesChange)="serversOnChange($event)"></app-editable-table>
        <br>
        <app-editable-table *ngIf="loadQID && appInfoConfig" [tableConfig]="appInfoConfig" (tableEntriesChange)="appsOnChange($event)"></app-editable-table>
      </app-work-flow-body>
      <app-work-flow-actions>
        <mat-action-row align="end" class="col-lg-12">
          <button mat-raised-button *ngIf="!qIdComplete" type="button" color="primary" class="cta-1" [disabled]="!(serversAdded > 0 && appsAdded > 0)" (click)="submitQID()">Submit QID</button>
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="stepperDemo.back()">Previous</button>
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="selectWrkFlw()">Next</button>
        </mat-action-row>
      </app-work-flow-actions>
    </app-work-flow>


    <app-work-flow [label]="'3. Scoping'" [isOpen]="isOpen">
      <app-work-flow-body>
        <div #scroll></div>
        <div *ngIf="scopingStepper; then scopingThenBlock; else scopingElseBlock"> </div>
      </app-work-flow-body>
      <app-work-flow-actions>
        <mat-action-row align="end" class="col-lg-12">
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="stepperDemo.back()">Previous</button>
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="selectWrkFlw()">Next</button>
        </mat-action-row>
      </app-work-flow-actions>
    </app-work-flow>

    <app-work-flow [label]="'4. Scheduling and Resourcing'" [isOpen]="isOpen">
      <app-work-flow-body>
        <div *ngIf="schedulingStepper; then schedulingThenBlock; else schedulingElseBlock"> </div>
      </app-work-flow-body>
      <app-work-flow-actions>
        <mat-action-row align="end" class="col-lg-12">
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="stepperDemo.back()">Previous</button>
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="selectWrkFlw()">Next</button>
        </mat-action-row>
      </app-work-flow-actions>
    </app-work-flow>

    <app-work-flow [label]="'5. Pen Testing Findings Report'" [isOpen]="isOpen">
      <app-work-flow-body>
        <app-file-upload *ngIf="!reportingComplete" [uploadOptions]="uploadOptions" (emitCurrentStepEvent)="reloadPenTest()"></app-file-upload>
        <app-file-download *ngIf="reportingComplete" [uploadOptions]="uploadOptions"></app-file-download>
      </app-work-flow-body>
      <app-work-flow-actions>
        <mat-action-row align="end" class="col-lg-12">
          <button mat-raised-button type="button" color="primary" class="step-nav" (click)="stepperDemo.back()">Previous</button>
        </mat-action-row>
      </app-work-flow-actions>
    </app-work-flow>

</app-work-flow-stepper>

<ng-template #loadingBlock>
  <div class="submit-spinner">
    <mat-spinner class="centered"></mat-spinner>
    <h4>Processing...</h4>
  </div>
</ng-template>

<ng-template #errorBlock>
  <div class="submit-screen">
    <img src="assets/img/error-circle.svg"/>
    <h5>Something went wrong</h5>
    <button mat-raised-button type="submit" color="primary" class="cta-1" (click)="tryAgain();">Try Again</button>
  </div>
</ng-template>

<ng-template #prescopeBlock>
  <div class="qns-window"><app-multistep-wiz [qnsMeta]="prescopeQnsMeta" [injectData]="injectData" (stepEvent)="submitQns($event)"></app-multistep-wiz></div>
</ng-template>

<ng-template #scopingBlock>
  <div class="qns-window"><app-multistep-wiz [qnsMeta]="scopingQnsMeta" [injectData]="injectScopingData" (stepEvent)="submitQns($event)"></app-multistep-wiz></div>
</ng-template>

<ng-template #schedulingBlock>
  <div class="qns-window"><app-multistep-wiz [qnsMeta]="schedulingQnsMeta" [injectData]="injectSchedulingData" (stepEvent)="submitQns($event)"></app-multistep-wiz></div>
</ng-template>




